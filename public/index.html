<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Pizza Order</title>
<style>
  body { font-family: Arial, sans-serif; margin: 0; padding: 20px; background: #f8f8f8; }
  h1 { text-align: center; }
  .pizza { background: white; padding: 15px; margin: 10px auto; max-width: 400px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
  .pizza button { background: #e63946; color: white; border: none; padding: 10px; border-radius: 5px; cursor: pointer; }
  #orders, #adminLogin { margin-top: 30px; background: white; padding: 15px; max-width: 500px; margin-left: auto; margin-right: auto; border-radius: 8px; }
  table { width: 100%; border-collapse: collapse; margin-top: 10px; }
  th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
  th { background: #e63946; color: white; }
</style>
</head>
<body>
<h1>üçï Pizza Shop</h1>

<!-- Customer Order Section -->
<div class="pizza">
  <h3>Margherita - $10</h3>
  <button onclick="orderPizza('Margherita')">Order</button>
</div>
<div class="pizza">
  <h3>Pepperoni - $12</h3>
  <button onclick="orderPizza('Pepperoni')">Order</button>
</div>
<div class="pizza">
  <h3>Veggie - $9</h3>
  <button onclick="orderPizza('Veggie')">Order</button>
</div>

<!-- Admin Login -->
<div id="adminLogin">
  <h3>Admin Login</h3>
  <input type="password" id="adminPass" placeholder="Enter password">
  <button onclick="loginAdmin()">Login</button>
</div>

<!-- Admin Orders Table -->
<div id="orders" style="display:none;">
  <h3>All Orders</h3>
  <table>
    <thead>
      <tr>
        <th>Pizza</th>
        <th>Time</th>
      </tr>
    </thead>
    <tbody id="orderTable"></tbody>
  </table>
</div>

<script>
function orderPizza(type) {
  fetch('/order', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ pizza: type })
  })
  .then(res => res.json())
  .then(data => {
    alert('Order placed: ' + data.pizza);
  });
}

function loginAdmin() {
  const pass = document.getElementById('adminPass').value;
  fetch('/admin-orders?pass=' + encodeURIComponent(pass))
    .then(res => res.json())
    .then(data => {
      if (data.error) {
        alert('Wrong password!');
        return;
      }
      document.getElementById('adminLogin').style.display = 'none';
      document.getElementById('orders').style.display = 'block';
      const table = document.getElementById('orderTable');
      table.innerHTML = '';
      data.forEach(o => {
        table.innerHTML += `<tr><td>${o.pizza}</td><td>${o.time}</td></tr>`;
      });
    });
}
</script>
</body>
</html>

